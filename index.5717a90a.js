function t(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function e(e,n){return function(t,e){return e.get?e.get.call(t):e.value}(e,t(e,n,"get"))}function n(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(t,e,i){n(t,e),e.set(t,i)}function o(e,n,i){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(e,t(e,n,"set"),i),i}function c(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function r(t,e){n(t,e),e.add(t)}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const l=["#11133c","#f9ead4","#030504","#ffffff","#79fe9d","#f9a86f","#f71e4d","#060fbf","#1d43c6","#eef5f9","#c3d5e1","#f2f2f2","#fcf8f3"],h={body:1,eye:2,nosemouth:2,ear:2};var u=new WeakMap,d=new WeakMap,f=new WeakMap,g=new WeakSet,w=new WeakSet,v=new WeakSet,y=new WeakSet,m=new WeakSet;class S{getBackgroundColor(){return o(this,d,c(this,g,b).call(this)),e(this,d)}getBodyConfig(){const t=c(this,g,b).call(this,3,[e(this,d),"#030504"]);o(this,f,t);return{color:t,scale:c(this,v,R).call(this,S.bodyScaleRange,3)+1}}getEyesConfig(){const t=c(this,g,b).call(this,5,[e(this,f)]),n=c(this,w,p).call(this,"eye",5);return{color:t,scale:c(this,v,R).call(this,S.eyesScaleRange,5)+1,distance:c(this,y,C).call(this,S.eyesDistanceRange,5),variant:n}}getNosemouthConfig(){const t=c(this,g,b).call(this,7,[e(this,f)]),n=c(this,w,p).call(this,"nosemouth",7);return{color:t,scale:c(this,v,R).call(this,S.nousemouthScaleRange,7)+1,variant:n}}getEarsConfig(){const t=c(this,g,b).call(this,11,[e(this,f),e(this,d)]),n=c(this,w,p).call(this,"ear",11);return{color:t,scale:c(this,v,R).call(this,S.earsScaleRange,11)+1,distance:c(this,y,C).call(this,S.earsDistanceRange,11),variant:n,rotation:c(this,y,C).call(this,S.earsRotation,11)}}constructor(t){r(this,g),r(this,w),r(this,v),r(this,y),r(this,m),a(this,u,{writable:!0,value:void 0}),a(this,d,{writable:!0,value:void 0}),a(this,f,{writable:!0,value:void 0}),o(this,u,t)}}function b(t=1,e){const n=e?l.filter((t=>!e.includes(t))):l;return n[c(this,m,k).call(this,t)%n.length]}function p(t,e=1){return c(this,m,k).call(this,e)%h[t]}function R(t,e=1){const n=100*t[0],i=100*t[1];return(n+c(this,m,k).call(this,e)%(i-n))/100}function C(t,e=1){const n=t[0],i=t[1];return n+c(this,m,k).call(this,e)%(i-n)}function k(t){const n=t%2==0?Math.ceil:Math.floor;return Math.abs(n(e(this,u)/t))}function $(t){var e=0;if(0==t.length)return e;for(i=0;i<t.length;i++)char=t.charCodeAt(i),e=(e<<5)-e+char,e&=e;return Math.abs(e)}let q,E,M,W,D,N,A,T,L,x,j,B;s(S,"bodyScaleRange",[-.1,.1]),s(S,"eyesScaleRange",[-.4,-.2]),s(S,"eyesDistanceRange",[24,48]),s(S,"nousemouthScaleRange",[-.2,.2]),s(S,"earsScaleRange",[-.4,-.2]),s(S,"earsDistanceRange",[48,64]),s(S,"earsRotation",[15,45]);const O={};function P(){const t=W.toDataURL("image/png");A.href=t,A.click(),A.href=null}function U(t){j=$(t),x.value=j,_()}function z(){const t=crypto.randomUUID();L.value=t,U(t)}function H(t){var e,n;U(null!==(n=null==t||null===(e=t.currentTarget)||void 0===e?void 0:e.value)&&void 0!==n?n:"")}async function I(t,e){const n=M.children[0],i=(new XMLSerializer).serializeToString(n);await async function(t){E.src=null;var e="data:image/svg+xml;base64,"+btoa(t);const n=new Promise((t=>E.onload=t));return E.src=e,n}(i),B.drawImage(E,t,e),function(){const t=W.toDataURL("image/png");T.src=t}()}function F(t){M.innerHTML="";const e=O[`svg-${t}`].cloneNode(!0);e.id="svg-clone",M.appendChild(e)}function X(t){const e=t.color,n=t.scale,i=t.rotation,a=document.querySelector("#svg-clone"),o=a.querySelector("[fill]");o.setAttributeNS(null,"fill",e),o.setAttributeNS(null,"stroke",e);const c=a.querySelector("g");var r;let s=null!==(r=c.getAttributeNS(null,"transform"))&&void 0!==r?r:"";if(s+=` scale(${n})`,i){s+=` rotate(${i} ${a.clientWidth/2} ${a.clientHeight/2})`}c.setAttributeNS(null,"transform",s);const l=a.clientWidth*n,h=a.clientHeight*n;return a.setAttributeNS(null,"width",l),a.setAttributeNS(null,"height",h),{width:l,height:h}}async function _(){const t=new S(j);!function(t){const e=t.getBackgroundColor();B.fillStyle=e,B.fillRect(0,0,W.width,W.height)}(t),await async function(t){const e=t.getBodyConfig();F("body-0");const n=X({color:e.color,scale:e.scale}),i=W.width/2-n.width/2,a=W.height/2-n.height/2;await I(i,a)}(t),await async function(t){const e=t.getEyesConfig();F(`eye-${e.variant}`);const n=X({color:e.color,scale:e.scale}),i=W.width/2-n.width/2-e.distance,a=W.height/2-n.height/2-24;await I(i,a),F(`eye-${e.variant}`);const o=X({color:e.color,scale:e.scale}),c=W.width/2-o.width/2+e.distance,r=W.height/2-o.height/2-24;await I(c,r)}(t),await async function(t){const e=t.getNosemouthConfig();F(`nosemouth-${e.variant}`);const n=X({color:e.color,scale:e.scale}),i=W.width/2-n.width/2,a=W.height/2-n.height/2+8;await I(i,a)}(t),await async function(t){const e=t.getEarsConfig();F(`ear-${e.variant}`);const n=X({color:e.color,scale:e.scale,rotation:-e.rotation}),i=W.width/2-n.width/2-e.distance,a=W.height/2-n.height/2-84;await I(i,a),F(`ear-${e.variant}`);const o=X({color:e.color,scale:e.scale,rotation:e.rotation}),c=W.width/2-o.width/2+e.distance,r=W.height/2-o.height/2-84;await I(c,r)}(t)}window.onload=async function(){q=document.querySelector("#componentContainer"),E=document.querySelector("#imgRenderer"),M=document.querySelector("#svgEditor"),D=document.querySelector("#btnDownloadAvatar"),N=document.querySelector("#btnRandomInput"),A=document.querySelector("#downloader"),T=document.querySelector("#avatarPreview"),L=document.querySelector("#inputText"),x=document.querySelector("#hash"),W=document.querySelector("#canvas"),L.value="7e4ef0cc-cce3-4c61-be83-7091185d75d2",j=$(L.value),x.value=j,W.width=256,W.height=256,B=W.getContext("2d"),D.addEventListener("click",P),N.addEventListener("click",z),L.addEventListener("change",H),await async function(){for(let n=0;n<Object.keys(h).length;n++){var t=Object.keys(h)[n],e=h[t];for(let n=0;n<e;n++){const e=`/components/${t}_${n}.svg`,i=await fetch(e),a=await i.text(),o=(new DOMParser).parseFromString(a,"text/xml").firstChild,c=`svg-${t}-${n}`;o.id=c,q.appendChild(o),O[c]=o}}}(),_()};
//# sourceMappingURL=index.5717a90a.js.map
