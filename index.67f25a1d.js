function t(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function e(e,n){return function(t,e){return e.get?e.get.call(t):e.value}(e,t(e,n,"get"))}function n(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i(t,e,i){n(t,e),e.set(t,i)}function a(e,n,i){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(e,t(e,n,"set"),i),i}function o(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function c(t,e){n(t,e),e.add(t)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const s=["#11133c","#f9ead4","#030504","#ffffff","#79fe9d","#f9a86f","#f71e4d","#060fbf","#1d43c6","#eef5f9","#c3d5e1","#f2f2f2","#fcf8f3"],l={body:1,eye:2,nosemouth:2,ear:2};var h=new WeakMap,u=new WeakMap,d=new WeakMap,f=new WeakSet,g=new WeakSet,w=new WeakSet,v=new WeakSet,y=new WeakSet;class m{getBackgroundColor(){return a(this,u,o(this,f,S).call(this)),e(this,u)}getBodyConfig(){const t=o(this,f,S).call(this,3,[e(this,u),"#030504"]);a(this,d,t);return{color:t,scale:o(this,w,p).call(this,m.bodyScaleRange,3)+1}}getEyesConfig(){const t=o(this,f,S).call(this,5,[e(this,d)]),n=o(this,g,b).call(this,"eye",5);return{color:t,scale:o(this,w,p).call(this,m.eyesScaleRange,5)+1,distance:o(this,v,R).call(this,m.eyesDistanceRange,5),variant:n}}getNosemouthConfig(){const t=o(this,f,S).call(this,7,[e(this,d)]),n=o(this,g,b).call(this,"nosemouth",7);return{color:t,scale:o(this,w,p).call(this,m.nousemouthScaleRange,7)+1,variant:n}}getEarsConfig(){const t=o(this,f,S).call(this,11,[e(this,d),e(this,u)]),n=o(this,g,b).call(this,"ear",11);return{color:t,scale:o(this,w,p).call(this,m.earsScaleRange,11)+1,distance:o(this,v,R).call(this,m.earsDistanceRange,11),variant:n,rotation:o(this,v,R).call(this,m.earsRotation,11)}}constructor(t){c(this,f),c(this,g),c(this,w),c(this,v),c(this,y),i(this,h,{writable:!0,value:void 0}),i(this,u,{writable:!0,value:void 0}),i(this,d,{writable:!0,value:void 0}),a(this,h,t)}}function S(t=1,e){const n=e?s.filter((t=>!e.includes(t))):s;return n[o(this,y,C).call(this,t)%n.length]}function b(t,e=1){return o(this,y,C).call(this,e)%l[t]}function p(t,e=1){const n=100*t[0],i=100*t[1];return(n+o(this,y,C).call(this,e)%(i-n))/100}function R(t,e=1){const n=t[0],i=t[1];return n+o(this,y,C).call(this,e)%(i-n)}function C(t){const n=t%2==0?Math.ceil:Math.floor;return Math.abs(n(e(this,h)/t))}function k(t){let e=0;if(0==t.length)return e;for(let n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n),e&=e}return Math.abs(e)}let $,q,E,M,W,D,N,A,T,L,x,j;r(m,"bodyScaleRange",[-.1,.1]),r(m,"eyesScaleRange",[-.4,-.2]),r(m,"eyesDistanceRange",[24,48]),r(m,"nousemouthScaleRange",[-.2,.2]),r(m,"earsScaleRange",[-.4,-.2]),r(m,"earsDistanceRange",[48,64]),r(m,"earsRotation",[15,45]);const B={};function O(){const t=M.toDataURL("image/png");N.href=t,N.click(),N.href=null}function P(t){x=k(t),L.value=x,X()}function U(){const t=crypto.randomUUID();T.value=t,P(t)}function z(t){var e,n;P(null!==(n=null==t||null===(e=t.currentTarget)||void 0===e?void 0:e.value)&&void 0!==n?n:"")}async function H(t,e){const n=E.children[0],i=(new XMLSerializer).serializeToString(n);await async function(t){q.src=null;var e="data:image/svg+xml;base64,"+btoa(t);const n=new Promise((t=>q.onload=t));return q.src=e,n}(i),j.drawImage(q,t,e),function(){const t=M.toDataURL("image/png");A.src=t}()}function I(t){E.innerHTML="";const e=B[`svg-${t}`].cloneNode(!0);e.id="svg-clone",E.appendChild(e)}function F(t){const e=t.color,n=t.scale,i=t.rotation,a=document.querySelector("#svg-clone"),o=a.querySelector("[fill]");o.setAttributeNS(null,"fill",e),o.setAttributeNS(null,"stroke",e);const c=a.querySelector("g");var r;let s=null!==(r=c.getAttributeNS(null,"transform"))&&void 0!==r?r:"";if(s+=` scale(${n})`,i){s+=` rotate(${i} ${a.clientWidth/2} ${a.clientHeight/2})`}c.setAttributeNS(null,"transform",s);const l=a.clientWidth*n,h=a.clientHeight*n;return a.setAttributeNS(null,"width",l),a.setAttributeNS(null,"height",h),{width:l,height:h}}async function X(){const t=new m(x);!function(t){const e=t.getBackgroundColor();j.fillStyle=e,j.fillRect(0,0,M.width,M.height)}(t),await async function(t){const e=t.getBodyConfig();I("body-0");const n=F({color:e.color,scale:e.scale}),i=M.width/2-n.width/2,a=M.height/2-n.height/2;await H(i,a)}(t),await async function(t){const e=t.getEyesConfig();I(`eye-${e.variant}`);const n=F({color:e.color,scale:e.scale}),i=M.width/2-n.width/2-e.distance,a=M.height/2-n.height/2-24;await H(i,a),I(`eye-${e.variant}`);const o=F({color:e.color,scale:e.scale}),c=M.width/2-o.width/2+e.distance,r=M.height/2-o.height/2-24;await H(c,r)}(t),await async function(t){const e=t.getNosemouthConfig();I(`nosemouth-${e.variant}`);const n=F({color:e.color,scale:e.scale}),i=M.width/2-n.width/2,a=M.height/2-n.height/2+8;await H(i,a)}(t),await async function(t){const e=t.getEarsConfig();I(`ear-${e.variant}`);const n=F({color:e.color,scale:e.scale,rotation:-e.rotation}),i=M.width/2-n.width/2-e.distance,a=M.height/2-n.height/2-84;await H(i,a),I(`ear-${e.variant}`);const o=F({color:e.color,scale:e.scale,rotation:e.rotation}),c=M.width/2-o.width/2+e.distance,r=M.height/2-o.height/2-84;await H(c,r)}(t)}window.onload=async function(){$=document.querySelector("#componentContainer"),q=document.querySelector("#imgRenderer"),E=document.querySelector("#svgEditor"),W=document.querySelector("#btnDownloadAvatar"),D=document.querySelector("#btnRandomInput"),N=document.querySelector("#downloader"),A=document.querySelector("#avatarPreview"),T=document.querySelector("#inputText"),L=document.querySelector("#hash"),M=document.querySelector("#canvas"),T.value="7e4ef0cc-cce3-4c61-be83-7091185d75d2",x=k(T.value),L.value=x,M.width=256,M.height=256,j=M.getContext("2d"),W.addEventListener("click",O),D.addEventListener("click",U),T.addEventListener("change",z),await async function(){for(let n=0;n<Object.keys(l).length;n++){var t=Object.keys(l)[n],e=l[t];for(let n=0;n<e;n++){const e=`/avatar-generator/components/${t}_${n}.svg`,i=await fetch(e),a=await i.text(),o=(new DOMParser).parseFromString(a,"text/xml").firstChild,c=`svg-${t}-${n}`;o.id=c,$.appendChild(o),B[c]=o}}}(),X()};
//# sourceMappingURL=index.67f25a1d.js.map
